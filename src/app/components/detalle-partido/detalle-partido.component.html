<div class="ui-fluid">

  <div class="ui-g"  *ngIf="currentUser && partido">
    <div class="ui-g-4">

     

    </div>
    <div class="ui-g-4">
     

    </div>
    <div class="ui-g-4">
      <button   
      class="ui-button-danger"    
      (click)="BorrarPartido()"
      pButton
      type="button"
      icon="fa fa-2x fa-eraser"
      label=" Borrar"
      *ngIf="1===1 || ( currentUser?.isAdmin && partido['idpartido_estado']!=1)">
      </button>

    </div>

  </div>


<div class="ui-g"  *ngIf="currentUser && partido">
 
  <div class="ui-g-8">
    <h3><i class="pi pi-calendar"></i> {{partido.dia}}</h3>  
  </div>

  <div class="ui-g-2">
    <h3><i class="pi pi-clock"></i>{{partido.duracion}}</h3>  
  </div>

  <div class="ui-g-2">
   
  </div>


  <div class="ui-g-6 ui-md-6">
    <h3>Pistas: {{partido.pistas}} </h3>
  </div>

  <div class="ui-g-6 ui-md-6">
    <h3>Jugadores: {{partido.jugadoresapuntados}}/{{partido.jugadorestotal}} </h3>
  </div>
  <div class="ui-g-10"></div>
  <div class="ui-g-2">
    <button   
    class="ui-button-success"    
    (click)="showDialogToAddJugador()"
    pButton
    type="button"
    icon="fa fa-2x fa-plus-square-o"
    label=" "
    *ngIf="currentUser?.isAdmin"
  ></button>
  </div>
  <div class="ui-g-6 ui-md-6">     
    
    <p-listbox [options]="drives" [(ngModel)]="selectdrive" 
         checkbox="checkbox"  optionLabel="alias">
        <p-header>
          <div class="ui-g-6">
            <i class="fa fa-user"></i>
            Drive
          </div>
          <div class="ui-g-6">
            <div (click)="borrarDrive()" class="rojo icono-link" *ngIf="currentUser?.isAdmin && partido && selectdrive">
              <i class="fa fa-eraser"></i>
              Borrar
            </div>      
          </div>    
        </p-header>
    </p-listbox>
      
  </div>


 <div class="ui-g-6 ui-md-6">  
  <p-listbox [options]="reves" [(ngModel)]="selectreves" 
   checkbox="checkbox"  optionLabel="alias">
  <p-header>
    <div class="ui-g-6">
      <i class="fa fa-user"></i>
      Revés
    </div>
    <div class="ui-g-6">
      <div (click)="borrarReves()" class="rojo icono-link" *ngIf="currentUser?.isAdmin && partido && selectreves">
        <i class="fa fa-eraser"></i>
        Borrar
      </div>      
    </div>    
  </p-header>
</p-listbox>
</div> 

<div class="ui-g-3"></div>
<div class="ui-g-6">
  <p-listbox [options]="suplentes" [(ngModel)]="selectsuplente" 
         checkbox="checkbox"  optionLabel="alias">
        <p-header>
          <div class="ui-g-6">
            <i class="fa fa-user"></i>
            Suplentes
          </div>
          <div class="ui-g-6">
            <div (click)="borrarSuplentes()" class="rojo icono-link" *ngIf="currentUser?.isAdmin && partido && selectsuplente">
              <i class="fa fa-eraser"></i>
              Borrar
            </div>      
          </div>    
        </p-header>
    </p-listbox>
</div>
<div class="ui-g-3">

</div>

<div class="ui-g-4" align="center" >  
    
    <button  *ngIf="currentUser?.isAdmin && partido" (click)="hacerparejas()"    
    pButton type="button" label="V.I.C.T.O.R." icon="fa fa-1x fa-steam"  iconPos="right"
    [disabled]="partido['idpartido_estado']!=1">
  </button> 
  
</div>
<div class="ui-g-4" align="center" >  
  <button   
        
  (click)="CerrarPartido()"
  pButton
  class="ui-button-info"   
  type="button"
  icon="fa fa-2x fa-close"
  label=" Cerrar"
  [disabled]="partido['idpartido_estado']!=1">
  </button>
</div>
<div class="ui-g-4" align="center" >  
  <button   
      class="ui-button-success"    
      (click)="FinalizarPartido()"
      pButton
      type="button"
      icon="fa fa-2x fa-smile-o"
      label=" Finalizar"
      [disabled]="partido['idpartido_estado']!=2">
      </button>
</div>


<div class="ui-g-12 ui-md-12" *ngIf="partido['idpartido_estado']===3">

  <p-table [value]="partidoxpistaxranking">
    <ng-template pTemplate="header">
        <tr>
            <th>Pareja</th>
            <th>Ganados</th>
            <th>Juegos</th>            
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-ppr>
        <tr>
            <td align="center">{{ppr['drive']}}-{{ppr['reves']}} </td>
            <td align="center">{{ppr['ganados']}}</td>
            <td align="center">{{ppr['juegos']}}</td>            
        </tr>
    </ng-template>
</p-table>

  
</div>


<div class="ui-g-12 ui-md-12">
  <app-partidoxpista 
  [pistasArray]="pistasArray" 
  [turnosArray]="turnosArray" 
  [idpartido]="partido.id"
  [partidosxpistas]="partidosxpistas"></app-partidoxpista>
</div>








</div>

<p-dialog
header="Añadir Jugador/es"
[(visible)]="displayDialog"
[responsive]="true"
showEffect="fade"
[modal]="false"
[style]="{'max-width': '800px'}"

>

<p-listbox [options]="newJugadores" [(ngModel)]="selectJugadores" multiple="multiple" checkbox="checkbox" filter="filter" optionLabel="alias">
  <p-header>
    <i class="fa fa-user"></i>
    Jugadores
  </p-header>
</p-listbox>
<button   
class="ui-button-success"  (click)="AddNewJugadores()" pButton type="button" 
icon="fa fa-2x fa-plus-square-o" [disabled]="selectJugadores.length === 0" label="Añadir" *ngIf="currentUser?.isAdmin" ></button>
 {{selectJugadores.length}}
</p-dialog>



